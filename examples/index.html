<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <meta name="description" content="Widgets Builder Examples" />
    <link rel="stylesheet" href="../build/static/css/main.chunk.css" />
    <title>Widgets Builder Examples</title>
  </head>
  <body>
    <noscript>You need to enable JavaScript to run this app.</noscript>

    <h2>Example</h2>
    <div id="container"></div>
    <h3>Widget 1</h3>
    <div id="container-1"></div>
    <h3>Widget 2</h3>
    <div id="container-2"></div>
    <h3>Widget 3</h3>
    <div id="container-3"></div>    
    
    <script src="https://cdnjs.cloudflare.com/ajax/libs/react/17.0.1/umd/react.production.min.js" integrity="sha512-YMtLFKDKe5a4zi7rJ0y4wdGErKZe3tx7L+AXDTxjNDzkv7jsaNhvumeU1xQvw6UqVwBVmYlO9NhsSuSVPUN/xQ==" crossorigin="anonymous"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/react-dom/17.0.1/umd/react-dom.production.min.js" integrity="sha512-vN6rbu+vWW4Ck3s6RbLZs+0gRl5PWOZRUqap38gZtsheSqA2zDeI3PCshuxfYx7ytkoFMrmd0gA2sZZeP1RZYQ==" crossorigin="anonymous"></script>

    <script src="../build/static/js/runtime-main.js"></script>
    <script src="../build/static/js/main.chunk.js"></script>
    <script src="../build/static/js/2.chunk.js"></script>
    <script>
      const {
          Logger,
          AppBuilder,
          WidgetBuilder,
          SwitchButtonBuilder,
          CurrentLanguage,
          LanguageSwitcher,
          SwitchButton
      } = wb;

      const widgetLanguageSwitcher = new WidgetBuilder()
          .withChildren(LanguageSwitcher)
          .withThemeSetEventHandler(theme => 
              Logger.debug(`Theme set event for widget1: '${theme}'`)
          )
          .build();

      const widgetCurrentLanguage = new WidgetBuilder()
          .withChildren(CurrentLanguage)
          .withThemeSetEventHandler(theme => 
              Logger.debug(`Theme set event for widget2: '${theme}'`)
          )
          .build();

      const widgetContainer1 = new WidgetBuilder()
          .withContainerId('container-1')
          .withChildren(SwitchButton)
          .withThemeSetEventHandler(theme => 
              Logger.debug(`Theme set event for widget3: '${theme}'`)
          )
          .build();

      const widgetContainer2 = new WidgetBuilder()
          .withContainerId('container-2')
          .withChildren(SwitchButton)
          .withThemeSetEventHandler(theme => 
              Logger.debug(`Theme set event for widget4: '${theme}'`)
          )
          .build();

      const widgetContainer3 = new WidgetBuilder()
          .withContainerId('container-3')
          .withChildren(SwitchButton)
          .withThemeSetEventHandler(theme => 
              Logger.debug(`Theme set event for widget5: '${theme}'`)
          )
          .build();

      const switchButton1 = new SwitchButtonBuilder()
          .withChildren([
              widgetContainer1.WidgetContainer, 
              widgetContainer2.WidgetContainer
          ])
          .build();

      const switchButton2 = new SwitchButtonBuilder()
          .withChildren(widgetContainer3.WidgetContainer)
          .build();

      const switchButton3 = new SwitchButtonBuilder()
          .withChildren([
              SwitchButton, 
              SwitchButton
          ])
          .build();

      const app = new AppBuilder()
          .withLanguage('en')
          .withTheme('default')
          .withLanguageSetEventHandler(language => 
              Logger.debug(`Language set event: '${language}'`)
          )
          .withThemeSetEventHandler(theme => 
              Logger.debug(`Theme set event: '${theme}'`)
          )
          .withChildren([ 
              widgetLanguageSwitcher.WidgetContainer,
              widgetCurrentLanguage.WidgetContainer,
              switchButton1.SwitchButtonContainer,
              switchButton2.SwitchButtonContainer,
              switchButton3.SwitchButtonContainer
          ])
          .build();

      app.render(document.getElementById('container'));

      // Test API
      widgetContainer3.setTheme('blue');

      setTimeout(() => {
          app.setLanguage('ru');
          app.setTheme('light');
          switchButton3.setEnabled(true);
          widgetContainer3.setTheme('dark');
      }, 3000);
    </script>
  </body>
</html>
